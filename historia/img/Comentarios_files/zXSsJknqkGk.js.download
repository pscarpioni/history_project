if (self.CavalryLogger) { CavalryLogger.start_js(["SpcHi"]); }

__d("FunnelRegistry",[],(function a(b,c,d,e,f,g){f.exports={WWW_EXAMPLE_FUNNEL:true,MSITE_EXAMPLE_FUNNEL:true,WWW_FEED_SHARE_DIALOG_FUNNEL:true,MSITE_FEED_SHARE_DIALOG_FUNNEL:true,PLATFORM_SHARE_DIALOG_FUNNEL:true,WWW_RECRUITING_SEARCH_FUNNEL:true,WWW_CANVAS_EDITOR_FUNNEL:true,MSITE_COMMENT_TYPING_FUNNEL:true,MSITE_NOTE_READING_FUNNEL:true,WWW_CAMPFIRE_COMPOSER_UPSELL_FUNNEL:true,WWW_REACTIONS_LIKE_BUTTON_HOVER_FUNNEL:true,WWW_REACTIONS_NUX_FUNNEL:true,WWW_COMMENT_REACTIONS_NUX_FUNNEL:true,MSITE_INLINE_REPLY_COMPOSER_FUNNEL:true,WWW_LEAD_GEN_FORM_CREATION_FUNNEL:true,WWW_LEAD_GEN_DESKTOP_AD_UNIT_FUNNEL:true,WWW_LEAD_GEN_MSITE_AD_UNIT_FUNNEL:true,WWW_LINK_PICKER_DIALOG_FUNNEL:true,WWW_MEME_PICKER_DIALOG_FUNNEL:true,WWW_SNOWLIFT_ACTIONS_FUNNEL:true,WWW_CANVAS_AD_CREATION_FUNNEL:true,WWW_SEARCH_AWARENESS_LEARNING_NUX_FUNNEL:true,WWW_CONSTITUENT_TITLE_UPSELL_FUNNEL:true,WWW_PAGE_CREATION_FUNNEL:true,WWW_VIDEOS_CASTING_FUNNEL:true,MSITE_PPD_FUNNEL:true,WWW_CMS_SEARCH_FUNNEL:true,SOCIAL_SEARCH_CONVERSION_WWW_FUNNEL:true,SOCIAL_SEARCH_DASHBOARD_WWW_FUNNEL:true,GAMES_QUICKSILVER_FUNNEL:true,SRT_USER_FLOW_FUNNEL:true,WWW_MEME_PIVOT_FUNNEL:true,WWW_NOTIFICATION_FUNNEL:true,MSITE_HASHTAG_PROMPT_FUNNEL:true,MSITE_FEED_ALBUM_CTA_FUNNEL:true,MTOUCH_COMMENT_STORIES_FUNNEL:true,WWW_MESSENGER_SHARE_TO_FB_FUNNEL:true,MISINFORMATION_RESHARE_ALERT_FUNNEL:true,WWW_ACCESSIBILITY_NOTIFICATIONS_JEWEL_TABBING_FUNNEL:true,MTOUCH_FEED_MISSED_STORIES_FUNNEL:true,WWW_STORYSET_FUNNEL:true,POLYGLOT_MAIN_FUNNEL:true,CREATIVE_STUDIO_CREATION_FUNNEL:true,WWW_LIVE_VIEWER_TIPJAR_FUNNEL:true};}),null);
__d('TypeaheadLogger',['MRequest','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j){function k(l,m){'use strict';this.$TypeaheadLogger1=new j();this.typeahead=l;this.uri=m.endPoint;this.dataOverride=m.metricsData;this.initialize();this.emptyQueryResults=[];this.data=null;this.sessionID=null;this.results=[];this.lastNotBackspacedQuery='';this.startSessionOnFocus=m.startSessionOnFocus;if(this.startSessionOnFocus)this.$TypeaheadLogger1.addSubscriptions(l.listen('focus',function(){var n=this.typeahead.getValue();this.startSession(n);}.bind(this)));this.$TypeaheadLogger1.addSubscriptions(l.listen('change',function(n){this.startSession(n);if(this.sessionInProgress()){this.data.query=n;if(this.lastNotBackspacedQuery.indexOf(n)!==0)this.lastNotBackspacedQuery=n;}}.bind(this)),l.listen('keydown',function(n){this.keypressed+=1;}.bind(this)),l.listen('choose',function(n,o){var p=n&&(n.rel||n.getAttribute('rel'));this.$TypeaheadLogger2(p,o);}.bind(this)),l.listen('show',function(n,o){var p=null;if(n.show){p=n.show.filter(function(r){return r.rel>0;}).map(function(r){return ''+r.rel;});}else if(n)p=n;var q=o;if(!q)q=this.typeahead.getValue();this.$TypeaheadLogger3(q,p);}.bind(this)),l.listen('scroll',function(event){this.data.scrolled=1;}.bind(this)),l.listen('blur',function(){this.blur('focusout');}.bind(this)));}k.prototype.destroy=function(){'use strict';this.$TypeaheadLogger1.release();delete this.$TypeaheadLogger1;};k.prototype.$TypeaheadLogger3=function(l,m){'use strict';this.startSession(l);if(this.sessionInProgress())if(m){this.results=m.slice();if(!l)this.emptyQueryResults=this.results;}};k.prototype.$TypeaheadLogger2=function(l,m){'use strict';this.data.click_event=Date.now();if(l){this.data.selected_id=l;this.data.selected_position=m;}else{this.data.selected_id='SELECT_NULL';this.data.selected_search=1;this.data.selected_position=-1;}this.logToServer();};k.prototype.blur=function(l){'use strict';if(!this.sessionInProgress())return;this.data.abandonment_reason=l;this.logToServer();};k.prototype.startSession=function(l,m){'use strict';m=m||{};if(this.sessionID==null&&(l||m.force||this.startSessionOnFocus)){this.data={};this.keypressed=0;this.sessionID=Math.floor(Date.now()*Math.random()).toString();this.data.query=l;this.data.session_start=Date.now();i.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID});}};k.prototype.sessionInProgress=function(){'use strict';return this.sessionID!=null;};k.prototype.getRequestData=function(){'use strict';Object.assign(this.data,this.dataOverride);var l={};this.buildRequestDataObject(l,this.data,'stats');return l;};k.prototype.buildRequestDataObject=function(l,m,n){'use strict';for(var o in m)if(m.hasOwnProperty(o)){var p=m[o],q=n+"["+o+"]";if(typeof p=='object'){this.buildRequestDataObject(l,p,q);}else l[q]=p;}};k.prototype.logToServer=function(){'use strict';if(this.sessionID){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;if(this.lastNotBackspacedQuery)this.data.last_not_backspaced_query=this.lastNotBackspacedQuery;var l=this.results||[];if(!this.data.query&&(!l||l.length===0))l=this.emptyQueryResults;if(this.data.selected_position===null)this.data.selected_position=l.indexOf(this.data.selected_id);this.data.candidate_results=JSON.stringify(l);var m=new h(this.uri);m.setMethod('POST').setData(this.getRequestData()).send();}this.initialize();};k.prototype.initialize=function(){'use strict';this.data={};this.sessionID=null;this.keypressed=0;this.results=[];this.lastNotBackspacedQuery='';};f.exports=k;}),null);
__d('MPlatformDialogTagger',['$','DOM','mapObject','mixInEventEmitter','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){n.prototype.init=function(o,p,q){'use strict';this.$MPlatformDialogTagger1=false;this.$MPlatformDialogTagger2=new m();this.$MPlatformDialogTagger3=null;this.$MPlatformDialogTagger4=o;this.$MPlatformDialogTagger5=p;l.addSigil(this.$MPlatformDialogTagger4.getRoot(),q);this.$MPlatformDialogTagger2.addSubscriptions(l.listen('click',q,this.$MPlatformDialogTagger6.bind(this)),this.$MPlatformDialogTagger5.listen('cancel',this.$MPlatformDialogTagger7.bind(this)),this.$MPlatformDialogTagger5.listen('submit',this.$MPlatformDialogTagger7.bind(this)),l.listen('m:history:change',null,function(r){if(!this.$MPlatformDialogTagger1)return;this.$MPlatformDialogTagger7();r.prevent();}.bind(this)),l.listen('m:page:unload',null,this.$MPlatformDialogTagger8.bind(this)));};n.prototype.createInputs=function(o,p,q){'use strict';q=q||'';this.reset();var r={};if(p){p.forEach(function(s){if(o[s])r[s]=o[s];});}else r=o;if(Object.keys(r).length===0){if(this.$MPlatformDialogTagger3)i.remove(this.$MPlatformDialogTagger3);this.$MPlatformDialogTagger4.setSelected(false);return;}this.$MPlatformDialogTagger3=i.create('div');j(r,function(s,t){i.appendContent(this.$MPlatformDialogTagger3,i.create('input',{type:'hidden',name:q+t,value:s}));}.bind(this));i.appendContent(this.$MPlatformDialogTagger4.getRoot(),this.$MPlatformDialogTagger3);if(Object.keys(r).some(function(s){return (Array.isArray(r[s])?r[s].length>0:r[s]);}))this.$MPlatformDialogTagger4.setSelected(true);};n.prototype.reset=function(){'use strict';if(this.$MPlatformDialogTagger3)i.remove(this.$MPlatformDialogTagger3);this.$MPlatformDialogTagger3=null;this.$MPlatformDialogTagger4.setSelected(false);};n.prototype.destroy=function(){'use strict';this.$MPlatformDialogTagger8();};n.prototype.$MPlatformDialogTagger6=function(event){'use strict';if(event.getNode('remove'))return;this.$MPlatformDialogTagger1=true;i.hide(h('viewport'));this.$MPlatformDialogTagger5.show();};n.prototype.$MPlatformDialogTagger7=function(){'use strict';this.$MPlatformDialogTagger1=false;i.show(h('viewport'));this.$MPlatformDialogTagger5.hide();};n.prototype.$MPlatformDialogTagger8=function(){'use strict';this.clearInputs();this.$MPlatformDialogTagger2.release();this.$MPlatformDialogTagger2=null;if(this.$MPlatformDialogTagger5&&this.$MPlatformDialogTagger5.getRoot())i.remove(this.$MPlatformDialogTagger5.getRoot());};function n(){'use strict';}k(n,{cleared:true,populated:true});f.exports=n;f.exports.EVENT_CLEARED='cleared';f.exports.EVENT_POPULATED='populated';}),null);
__d('MPlatformDialogOGTagger',['DOM','MOpenGraphTagger','MPlatformDialogTagger','MRequest','MRequestTypes','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q='fb:og-tagger:',r=q+'og-tagger',s=['action_type','action_type_str','location_id','object','object_str'];o=babelHelpers.inherits(t,j);p=o&&o.prototype;function t(u,v,w){'use strict';p.constructor.call(this);this.$MPlatformDialogOGTagger1=new n();this.$MPlatformDialogOGTagger2=new i(v);this.$MPlatformDialogOGTagger3=w;this.init(u,this.$MPlatformDialogOGTagger2,r);this.$MPlatformDialogOGTagger1.addSubscriptions(this.$MPlatformDialogOGTagger2.listen('submit',function(x){this.createInputs(x,s,q);this.$MPlatformDialogOGTagger3.setValue(x.fbt_phrase);m.invoke(j.EVENT_POPULATED,r,x);}.bind(this)),this.$MPlatformDialogOGTagger3.addListener('clear',function(){this.reset();m.invoke(j.EVENT_CLEARED,r);},this),m.listen('m:page:unload',null,this.$MPlatformDialogOGTagger4.bind(this)));new k('/platform/og/composer/tagger').setType(l.DEPENDENT).send();}t.prototype.$MPlatformDialogOGTagger4=function(){'use strict';this.$MPlatformDialogOGTagger1.release();this.$MPlatformDialogOGTagger1=null;if(this.$MPlatformDialogOGTagger2&&this.$MPlatformDialogOGTagger2.getRoot())h.remove(this.$MPlatformDialogOGTagger2.getRoot());};t.SIGIL=r;f.exports=t;}),null);
__d('MPlatformDialogPeopleTagger',['DOM','MFriendsTaggerReact','MPlatformDialogTagger','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n,o='fb:og:people:',p=o+'tagger';m=babelHelpers.inherits(q,j);n=m&&m.prototype;function q(r,s,t){'use strict';n.constructor.call(this);this.$MPlatformDialogPeopleTagger1=new l();this.$MPlatformDialogPeopleTagger2=new i(s);this.$MPlatformDialogPeopleTagger3=r;this.init(this.$MPlatformDialogPeopleTagger3,this.$MPlatformDialogPeopleTagger2,p);this.$MPlatformDialogPeopleTagger1.addSubscriptions(this.$MPlatformDialogPeopleTagger2.listen('submit',this.$MPlatformDialogPeopleTagger4.bind(this)),k.listen('click',p,this.$MPlatformDialogPeopleTagger5.bind(this)),k.listen('m:page:unload',null,this.$MPlatformDialogPeopleTagger6.bind(this)));var u=t&&t.length?{friend_ids:t}:{};this.createInputs(u,null,o);}q.prototype.$MPlatformDialogPeopleTagger4=function(r){'use strict';if(!this.$MPlatformDialogPeopleTagger2.hasTokens()){k.invoke(j.EVENT_CLEARED,p);}else k.invoke(j.EVENT_POPULATED,p,r.tokens);this.$MPlatformDialogPeopleTagger7();};q.prototype.$MPlatformDialogPeopleTagger5=function(event){'use strict';if(event.getNode('remove')){this.$MPlatformDialogPeopleTagger2.removeToken(event.getNode('token'));this.$MPlatformDialogPeopleTagger7();}};q.prototype.$MPlatformDialogPeopleTagger7=function(){'use strict';var r={};if(this.$MPlatformDialogPeopleTagger2.hasTokens()){r={friend_ids:Object.keys(this.$MPlatformDialogPeopleTagger2.getTokens())};}else this.$MPlatformDialogPeopleTagger3.setSelected(false);this.createInputs(r,null,o);};q.prototype.$MPlatformDialogPeopleTagger6=function(){'use strict';this.$MPlatformDialogPeopleTagger1.release();this.$MPlatformDialogPeopleTagger1=null;if(this.$MPlatformDialogPeopleTagger2&&this.$MPlatformDialogPeopleTagger2.getRoot())h.remove(this.$MPlatformDialogPeopleTagger2.getRoot());};q.SIGIL=p;f.exports=q;}),null);
__d('MPlatformDialogPlaceTagger',['DOM','MPlacesTagger','MPlatformDialogTagger','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n,o='fb:og:place:',p=o+'tagger';m=babelHelpers.inherits(q,j);n=m&&m.prototype;function q(r,s,t,u){'use strict';n.constructor.call(this);this.$MPlatformDialogPlaceTagger1=new l();this.$MPlatformDialogPlaceTagger2=new i(s);this.$MPlatformDialogPlaceTagger3=t;this.init(r,this.$MPlatformDialogPlaceTagger2,p);this.$MPlatformDialogPlaceTagger1.addSubscriptions(this.$MPlatformDialogPlaceTagger2.listen('submit',function(v){this.createInputs(v,null,o);this.$MPlatformDialogPlaceTagger3.setValue(v.name);k.invoke(j.EVENT_POPULATED,p,v);}.bind(this),this.$MPlatformDialogPlaceTagger3.addListener('clear',function(){this.reset();k.invoke(j.EVENT_CLEARED,p);},this),k.listen('m:page:unload',null,this.$MPlatformDialogPlaceTagger4.bind(this))));if(u)this.createInputs(u,null,o);}q.prototype.$MPlatformDialogPlaceTagger4=function(){'use strict';this.$MPlatformDialogPlaceTagger1.release();this.$MPlatformDialogPlaceTagger1=null;if(this.$MPlatformDialogPlaceTagger2&&this.$MPlatformDialogPlaceTagger2.getRoot())h.remove(this.$MPlatformDialogPlaceTagger2.getRoot());};q.SIGIL=p;f.exports=q;}),null);
__d('MPlatformDialogTaggingToggle',['cx','CSS'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n){'use strict';this.$MPlatformDialogTaggingToggle1=k;this.$MPlatformDialogTaggingToggle2=l;this.$MPlatformDialogTaggingToggle3=m;this.$MPlatformDialogTaggingToggle4=n;}j.prototype.getRoot=function(){'use strict';return this.$MPlatformDialogTaggingToggle1;};j.prototype.getButton=function(){'use strict';return this.$MPlatformDialogTaggingToggle2;};j.prototype.getType=function(){'use strict';return this.$MPlatformDialogTaggingToggle3;};j.prototype.isSelected=function(){'use strict';return this.$MPlatformDialogTaggingToggle4;};j.prototype.setSelected=function(k){'use strict';i.conditionClass(this.$MPlatformDialogTaggingToggle2,"_t31",k);this.$MPlatformDialogTaggingToggle4=k;};f.exports=j;}),null);
__d('MPlatformDialogTokenarea',['CSS','DOM','Stratcom','createArrayFromMixed','invariant','isNode'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){'use strict';this.$MPlatformDialogTokenarea1=o;this.$MPlatformDialogTokenarea2=p;}n.prototype.getNode=function(){'use strict';return this.$MPlatformDialogTokenarea1;};n.prototype.hasTokens=function(){'use strict';return i.scry(this.$MPlatformDialogTokenarea2,'li').length>0;};n.prototype.addTokens=function(o){'use strict';i.setContent(this.$MPlatformDialogTokenarea2,null);o=k(o);o.forEach(function(p){p||l(0);var q={className:'mToken'};if(m(p)){h.removeClass(p,'mToken');if(!j.hasSigil(p,'token'))q.sigil='token';}else{q.sigil='token';if(p.hasOwnProperty('name'))p=p.name;}var r=p===null?null:[p];i.appendContent(this.$MPlatformDialogTokenarea2,i.create('li',q,r));},this);h.show(this.$MPlatformDialogTokenarea1);return Array.from(this.$MPlatformDialogTokenarea2.childNodes);};n.prototype.clear=function(){'use strict';i.setContent(this.$MPlatformDialogTokenarea2,null);h.hide(this.$MPlatformDialogTokenarea1);};f.exports=n;}),null);
__d('MPlatformDialogOGTokenarea',['DOM','MPlatformDialogTagger','MPlatformDialogTokenarea','MPlatformDialogOGTagger','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){'use strict';this.$MPlatformDialogOGTokenarea1=new j(o,p);this.$MPlatformDialogOGTokenarea2=new m();l.addSigil(this.$MPlatformDialogOGTokenarea1.getNode(),k.SIGIL);this.$MPlatformDialogOGTokenarea2.addSubscriptions(l.listen(i.EVENT_POPULATED,k.SIGIL,this.$MPlatformDialogOGTokenarea3.bind(this)),l.listen(i.EVENT_CLEARED,k.SIGIL,this.$MPlatformDialogOGTokenarea4.bind(this)),l.listen('m:page:unload',null,this.$MPlatformDialogOGTokenarea5.bind(this)));}n.prototype.$MPlatformDialogOGTokenarea3=function(event){'use strict';this.$MPlatformDialogOGTokenarea4();var o=h.create('span',{},event.getData().fbt_phrase);this.$MPlatformDialogOGTokenarea1.addTokens([o]);};n.prototype.$MPlatformDialogOGTokenarea4=function(){'use strict';this.$MPlatformDialogOGTokenarea1.clear();};n.prototype.$MPlatformDialogOGTokenarea5=function(){'use strict';this.$MPlatformDialogOGTokenarea2.release();this.$MPlatformDialogOGTokenarea2=null;};f.exports=n;}),null);
__d('MPlatformDialogPeopleTokenarea',['DOM','MPlatformDialogTagger','MPlatformDialogTokenarea','MPlatformDialogPeopleTagger','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){'use strict';this.$MPlatformDialogPeopleTokenarea1=new j(o,p);this.$MPlatformDialogPeopleTokenarea2=new m();l.addSigil(o,k.SIGIL);this.$MPlatformDialogPeopleTokenarea2.addSubscriptions(l.listen(i.EVENT_POPULATED,k.SIGIL,this.$MPlatformDialogPeopleTokenarea3.bind(this)),l.listen(i.EVENT_CLEARED,k.SIGIL,this.$MPlatformDialogPeopleTokenarea4.bind(this)),l.listen('click',k.SIGIL,this.$MPlatformDialogPeopleTokenarea5.bind(this)),l.listen('m:page:unload',null,this.$MPlatformDialogPeopleTokenarea6.bind(this)));}n.prototype.$MPlatformDialogPeopleTokenarea3=function(event){'use strict';this.$MPlatformDialogPeopleTokenarea1.addTokens(event.getData());};n.prototype.$MPlatformDialogPeopleTokenarea5=function(event){'use strict';if(event.getNode('remove'))h.remove(event.getNode(k.SIGIL));if(!this.$MPlatformDialogPeopleTokenarea1.hasTokens())this.$MPlatformDialogPeopleTokenarea4();};n.prototype.$MPlatformDialogPeopleTokenarea4=function(){'use strict';this.$MPlatformDialogPeopleTokenarea1.clear();};n.prototype.$MPlatformDialogPeopleTokenarea6=function(){'use strict';this.$MPlatformDialogPeopleTokenarea2.release();this.$MPlatformDialogPeopleTokenarea2=null;};f.exports=n;}),null);
__d('MPlatformDialogPlaceTokenarea',['MPlatformDialogTagger','MPlatformDialogTokenarea','MPlatformDialogPlaceTagger','Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i,j,k,l){function m(n,o,p,q){'use strict';this.$MPlatformDialogPlaceTokenarea1=new i(n,o);this.$MPlatformDialogPlaceTokenarea2=new i(p,q);k.addSigil(this.$MPlatformDialogPlaceTokenarea1.getNode(),j.SIGIL);k.addSigil(this.$MPlatformDialogPlaceTokenarea2.getNode(),j.SIGIL);this.$MPlatformDialogPlaceTokenarea3=new l();this.$MPlatformDialogPlaceTokenarea3.addSubscriptions(k.listen(h.EVENT_POPULATED,j.SIGIL,this.$MPlatformDialogPlaceTokenarea4.bind(this)),k.listen(h.EVENT_CLEARED,j.SIGIL,this.$MPlatformDialogPlaceTokenarea5.bind(this)),k.listen('m:page:unload',null,this.$MPlatformDialogPlaceTokenarea6.bind(this)));}m.prototype.$MPlatformDialogPlaceTokenarea4=function(event){'use strict';this.$MPlatformDialogPlaceTokenarea5();var n=event.getData();if(n.isNonSpecific){this.$MPlatformDialogPlaceTokenarea2.addTokens(n.name);}else this.$MPlatformDialogPlaceTokenarea1.addTokens(n.name);};m.prototype.$MPlatformDialogPlaceTokenarea5=function(){'use strict';this.$MPlatformDialogPlaceTokenarea1.clear();this.$MPlatformDialogPlaceTokenarea2.clear();};m.prototype.$MPlatformDialogPlaceTokenarea6=function(){'use strict';this.$MPlatformDialogPlaceTokenarea3.release();this.$MPlatformDialogPlaceTokenarea3=null;};f.exports=m;}),null);
__d('FunnelAction',[],(function a(b,c,d,e,f,g){'use strict';var h='name',i='payload',j='relative_time',k='tag';function l(m,n,o,p){this.$FunnelAction1={};this.$FunnelAction1[h]=m;this.$FunnelAction1[j]=n;if(o!==undefined)this.$FunnelAction1[k]=o;if(p!==undefined)this.$FunnelAction1[i]=JSON.stringify(p);}l.prototype.getData=function(){return this.$FunnelAction1;};f.exports=l;}),null);
__d('Funnel',['FunnelAction','FunnelRegistry','invariant','sprintf'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l='name',m='instance_id',n='start_time',o='tags',p='actions',q='sampling_rate',r='timeout_sec',s={EXPLICIT:'explicit',TIMEOUT:'timeout',SESSION_END:'session_end',RESTART:'restart',ACTIONS_FULL:'actions_full'},t={ACTION_END:'funnel_end',ACTION_WINDOW_BLUR:'window_blur',ACTION_WINDOW_FOCUS:'window_focus'},u=600;function v(w,x,y,z){i[w]===true||j(0);this.$Funnel1=w;this.$Funnel2=x;this.$Funnel3=[];this.$Funnel4={};this.$Funnel5=y;this.$Funnel6=Date.now();this.timeout_sec=u;this.shouldTrackFocus=false;this.$Funnel7=z;this.devModeLogger('Started funnel');}v.prototype.addTag=function(w){typeof w==='string'||j(0);this.$Funnel4[w]=true;this.devModeLogger('Added funnel tag %s',w);return this;};v.prototype.appendAction=function(w,x,y){this.$Funnel3.push(new h(w,Date.now()-this.$Funnel6,x,y));if(x){this.devModeLogger('Appended action %s with tag %s',w,x);}else this.devModeLogger('Appended action %s',w);this.$Funnel8=w;return this;};v.prototype.appendActionIfNew=function(w,x,y){if(w!==this.$Funnel8)this.appendAction(w,x,y);return this;};v.prototype.getLogData=function(){var w={};w[l]=this.$Funnel1;if(this.$Funnel2!==undefined){w[m]=this.$Funnel2;}else w[m]=Math.floor(Math.random()*65536);w[n]=this.$Funnel6;w[q]=this.$Funnel5;w[r]=this.timeout_sec;w[o]=[];for(var x in this.$Funnel4)if(this.$Funnel4[x]===true)w[o].push(x);if(this.$Funnel3.length>0){w[p]=[];for(var y=0;y<this.$Funnel3.length;y++)w[p].push(this.$Funnel3[y].getData());}return w;};v.prototype.devModeLogger=function(){};v.prototype.getTags=function(){return this.$Funnel4;};f.exports={Funnel:v,EndType:s,ActionType:t};}),null);
__d('FunnelLoggerSampler',['FunnelLoggerConfig'],(function a(b,c,d,e,f,g,h){'use strict';function i(k){var l=j(k);if(l===0)return false;return Math.random()*l<1;}function j(k){var l=h.freq[k];if(l===undefined)l=h.freq['default'];return l;}f.exports={shouldLog:i,getSamplingRate:j};}),null);
__d('FunnelLogger',['Banzai','Funnel','FunnelRegistry','FunnelLoggerSampler','MarauderLogger','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n={},o=false,p=true;function q(va,wa){var xa=ga(va,wa);ua();pa(xa);if(k.shouldLog(va)){n[xa]=new i.Funnel(va,wa,k.getSamplingRate(va),false);ja(xa);}}function r(va,wa){var xa=ga(va,wa);if(!ha(xa))return null;return n[xa];}function s(va,wa){}function t(va,wa,xa){if(xa===undefined){ia(va,undefined,wa);}else if(xa)ia(va,wa,xa);}function u(va,wa){var xa=ga(va,wa);if(ha(xa)){n[xa].devModeLogger('Cancelled funnel');ka(xa);n[xa]=undefined;}}function v(va,wa){var xa=ga(va,wa);if(ha(xa)){n[xa].appendAction(i.ActionType.ACTION_END,i.EndType.EXPLICIT);qa(xa);}}function w(va,wa,xa){if(xa===undefined){la(va,undefined,String(wa));}else la(va,Number(wa),xa);}function x(va,wa,xa){if(xa===undefined){ma(va,undefined,Boolean(wa));}else ma(va,Number(wa),xa);}function y(va,wa,xa){if(xa===undefined){na(va,undefined,String(wa),undefined);}else na(va,Number(wa),xa,undefined);}function z(va,wa,xa){if(xa===undefined){oa(va,undefined,String(wa),undefined);}else oa(va,Number(wa),xa,undefined);}function aa(va,wa,xa,ya){if(ya===undefined){na(va,undefined,String(wa),xa);}else na(va,Number(wa),xa,ya);}function ba(va,wa,xa,ya){if(ya===undefined){oa(va,undefined,String(wa),xa);}else oa(va,Number(wa),xa,ya);}function ca(va,wa,xa,ya){if(ya===undefined){na(va,undefined,String(wa),undefined,xa);}else na(va,Number(wa),String(xa),undefined,ya);}function da(va,wa,xa,ya){if(ya===undefined){oa(va,undefined,String(wa),undefined,xa);}else oa(va,Number(wa),String(xa),undefined,ya);}function ea(va,wa,xa,ya,za){if(za===undefined){na(va,undefined,String(wa),xa,ya);}else na(va,Number(wa),String(xa),String(ya),za);}function fa(va,wa,xa,ya,za){if(za===undefined){oa(va,undefined,String(wa),xa,ya);}else oa(va,Number(wa),String(xa),String(ya),za);}function ga(va,wa){j[va]===true||m(0);if(wa===undefined||wa===null){return va;}else return va+wa.toString();}function ha(va){return n[va]!==undefined;}function ia(va,wa,xa){var ya=ga(va,wa);if(ha(ya)){n[ya].timeout_sec=xa;n[ya].devModeLogger('Timeout set to %d sec',xa);ja(ya);}}function ja(va){ka(va);n[va].timeout_handle=setTimeout(function(){n[va].appendAction(i.ActionType.ACTION_END,i.EndType.TIMEOUT);qa(va);},1000*n[va].timeout_sec);}function ka(va){if(n[va].timeout_handle)clearTimeout(n[va].timeout_handle);}function la(va,wa,xa){var ya=ga(va,wa);if(ha(ya)){n[ya].addTag(xa);ja(ya);}}function ma(va,wa,xa){var ya=ga(va,wa);if(ha(ya)){n[ya].shouldTrackFocus=xa;n[ya].devModeLogger('Focus tracking %s',xa?'on':'off');}}function na(va,wa,xa,ya,za){var ab=ga(va,wa);if(ha(ab)){n[ab].appendAction(xa,ya,za);ja(ab);}}function oa(va,wa,xa,ya,za){var ab=ga(va,wa);if(ha(ab))n[ab].appendActionIfNew(xa,ya,za);}function pa(va){if(ha(va)){n[va].appendAction(i.ActionType.ACTION_END,i.EndType.RESTART);qa(va);}}function qa(va){if(ha(va)){var wa=n[va].getLogData();l.log('funnel_analytics',null,wa);n[va].devModeLogger('Logged: %s',JSON.stringify(wa));ka(va);n[va]=undefined;}}function ra(){for(var va in n)if(n.hasOwnProperty(va)&&ha(va)){n[va].appendAction(i.ActionType.ACTION_END,i.EndType.SESSION_END);qa(va);}}function sa(){if(p){p=false;for(var va in n)if(n.hasOwnProperty(va)&&ha(va)&&n[va].shouldTrackFocus){n[va].appendAction(i.ActionType.ACTION_WINDOW_BLUR);ka(va);}}}function ta(){if(!p){p=true;for(var va in n)if(n.hasOwnProperty(va)&&ha(va)&&n[va].shouldTrackFocus){n[va].appendAction(i.ActionType.ACTION_WINDOW_FOCUS);ka(va);}}}function ua(){if(!o){o=true;if(window.addEventListener){h.subscribe(h.SHUTDOWN,ra);window.addEventListener('blur',sa);window.addEventListener('focus',ta);}}}f.exports={startFunnel:q,startFunnel_DEV_MODE:s,setFunnelTimeout:t,setFunnelTrackFocus:x,addFunnelTag:w,appendAction:y,appendActionIfNew:z,appendActionWithTag:aa,appendActionWithTagIfNew:ba,appendActionWithPayload:ca,appendActionWithPayloadIfNew:da,appendActionWithTagAndPayload:ea,appendActionWithTagAndPayloadIfNew:fa,cancelFunnel:u,endFunnel:v,getFunnelInstance:r};}),null);
__d('MHashtagPromptLogging',['FunnelLogger','HashtagParser','MCompositionStatusFields','MCompositionStatusStore','MParent','MStopNGo','MViewport','Run','Stratcom','SubscriptionsHandler','clearInterval','forEachObject','setInterval'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u='post_created',v='prompt_seen',w='prompt_clicked',x='MSITE_HASHTAG_PROMPT_FUNNEL',y=3000,z=false,aa={},ba=0,ca={},da=void 0,ea={},fa={},ga=void 0;function ha(ra){var sa=ra.split(':'),ta=sa[0],ua=sa[1],va=oa(ua);return [ta,va];}function ia(){if(ga==null)ga=new q();return ga;}function ja(){var ra=k.get(j.TEXT,''),sa=i.parse(ra);sa.forEach(function(ta){var ua=ta.tag,va=ca[ua];if(va==null)return;var wa=aa[va];if(wa==null)return;h.appendActionIfNew(x,wa,u);h.endFunnel(x,wa);delete aa[va];});}function ka(ra){if(!fa[ra])la(ra);h.appendActionIfNew(x,aa[ra],w);var sa=ha(ra)[1];ca[sa]=ra;}function la(ra){var sa=ha(ra),ta=sa[0],ua=sa[1],va=aa[ra];h.startFunnel(x,va);h.addFunnelTag(x,va,'hashtag:'+ua);h.addFunnelTag(x,va,'storyID:'+ta);h.appendActionIfNew(x,va,v);ca[ua]=ra;fa[ra]=true;}function ma(){var ra;if(da==null)(function(){var sa=t(pa,y);da={cancel:function ta(){r(sa);da=null;}};ia().addSubscriptions(da);pa();})();}function na(ra){var sa=ra.getBoundingClientRect();return (sa.bottom>0&&sa.top<n.getUseableHeight());}function oa(ra){return ra.replace(/^[#\uFF03]/,'');}function pa(){s(ea,function(ra,sa){if(!fa[sa]&&ra.some(function(ta){return na(ta);}))la(sa);});}var qa={register:function ra(sa,ta,ua,va){var wa=oa(ta),xa=sa+':'+wa;if(!ea[xa])ea[xa]=[];ea[xa].push(ua);if(aa[xa]==null)aa[xa]=ba++;if(!z){ia().engage();ia().addSubscriptions(m.listen('go',function(){ma();}),m.listen('stop',function(){if(da)da.cancel();}),o.onLeave(function(){ea={};ga.release();z=false;}),p.listen('MComposer:submit',null,ja));z=true;}ia().addSubscriptions(p.listen('click','composer_entry_trigger',function(event){var ya=l.bySigil(event.getTarget(),'hashtag_prompt');if(ya===ua)ka(xa);}));if(!fa[xa]&&na(ua))la(xa);ma();}};f.exports=qa;}),null);
__d('MInlineSelect',['DOM','destroyOnUnload'],(function a(b,c,d,e,f,g,h,i){function j(k){'use strict';this.label=h.find(k,'span','label');this.selector=h.find(k,'select');this.update();var l=h.listen(this.selector,'change',null,this.update.bind(this));i(l.remove.bind(l));}j.prototype.update=function(){'use strict';var k=this.selector.options[this.selector.selectedIndex];h.setContent(this.label,k.innerText||k.textContent);};f.exports=j;}),null);
__d('MRemoveToken',['DOM','Stratcom'],(function a(b,c,d,e,f,g,h,i){var j=false,k=function l(){if(j)return;j=true;i.listen('click','remove-token',function(m){h.remove(m.getNode('token'));m.kill();});};g.main=k;}),null);
__d('MTypeahead',['CSS','DOM','MInputFocus','MTypeaheadOnDemandSource','MTypeaheadTouchSource','MTypeaheadTouchSourceShowOnFocus','Stratcom','Style','Typeahead','TypeaheadLogger','TypeaheadCompositeSource','Vector','$'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u='typeahead-photo',v=function w(x){var y=[],z=null;if(x.sources.bootstrapped)if(x.showBootstrapOnFocus){z=new m(x.sources.bootstrapped.src,x.sources.bootstrapped.source_key,x.bootstrapMaximumResultCount);y.push(z);}else y.push(new l(x.sources.bootstrapped.src,x.sources.bootstrapped.source_key));if(x.sources.online)y.push(new k(x.sources.online.src));var aa=t(x.id),ba=new r(y),ca=t(x.textinput),da=new p(aa,ca),ea=t(x.hiddeninput);da.setDatasource(ba);ba.setShouldMergeResults(x.shouldMergeResults);var fa=x.exclusions;if(fa)for(var ga=fa,ha=Array.isArray(ga),ia=0,ga=ha?ga:ga[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ja;if(ha){if(ia>=ga.length)break;ja=ga[ia++];}else{ia=ga.next();if(ia.done)break;ja=ia.value;}var ka=ja;ba.addExcludeID(ka);}if(!x.navigateOnSelect&&!x.usesCustomClickEvent)i.listen(aa,'click','typeahead-result',function(la){la.kill();});if(x.requireSelection)i.listen(ca,'blur',null,function(la){if(ea.value==='')da.clear();});if(x.metrics&&x.metrics.endPoint)this._logger=new q(da,x.metrics);i.listen(aa,'blur',null,function(la){if(z)z.setIsFocused(false);});i.listen(aa,'focus',null,function(la){if(z){z.setQuery(ca.value);z.setIsFocused(true);z.showOnFocus();}if(x.autoscroll)if(aa.offsetWidth>0&&aa.offsetHeight>0)j.scrollTo(ca,s.getPos(aa).y);});da.listen('choose',function(la){if(x.navigateOnSelect){n.context().prevent();}else{ea.value=la.getAttribute('rel');if(x.addExtraData&&la.getAttribute('data-extra'))ea.value=la.getAttribute('data-extra');if(x.showPhoto){var ma=i.find(aa,'*',u),na=la.firstChild;if(!na.style.backgroundImage){h.removeClass(aa,'hasPhoto');return;}var oa=na.cloneNode(true);oa.setAttribute('data-sigil',u);h.addClass(oa,'typeaheadPhoto');h.addClass(aa,'hasPhoto');var pa=x.photoSize;pa=pa?pa:na.clientHeight;o.set(oa,'width',pa+'px');o.set(oa,'height',pa+'px');o.set(oa,'background-size',pa+'px '+pa+'px');i.replace(ma,oa);}}});da.listen('change',function(la){if(z)z.showOnFocus();if(x.showPhoto)h.removeClass(aa,'hasPhoto');ea.value=null;});da.start();n.invoke('m:typeahead:init',x.id,da);};g.main=v;}),null);
__d('PlatformShareDialogFunnelLogger',['FunnelLogger'],(function a(b,c,d,e,f,g,h){'use strict';var i='PLATFORM_SHARE_DIALOG_FUNNEL',j={_funnelStarted:false,startFunnel:function k(l,m,n,o,p,q,r){h.startFunnel(i);h.addFunnelTag(i,'domain:'+l);h.addFunnelTag(i,'browser:'+m);h.addFunnelTag(i,'req_dialog:'+n);h.addFunnelTag(i,'dialog:'+o);h.addFunnelTag(i,'controller:'+p);h.addFunnelTag(i,'req_display:'+q);h.addFunnelTag(i,'display:'+r);this._funnelStarted=true;},endFunnel:function k(){h.endFunnel(i);},registerListenerForVisibility:function k(l,m){if(!m)return;if(this._funnelStarted&&this.isElementVisible(m)){this.appendUserActionIfNew(l+':visible');}else setTimeout(function(){return this.registerListenerForVisibility(l,m);}.bind(this),1000);},registerListenerForUserKeyInput:function k(l,m){if(!m||!m.addEventListener)return;m.addEventListener('input',function(event){var n=event.target;if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement){this.appendUserActionIfNew(l+':input');var o=n.value;if(/(^|\s+)#\w\s/.test(o))this.appendUserActionIfNew(l+':hash_intended');if(/(^|\s+)@\w/.test(o))this.appendUserActionIfNew(l+':mention_intended');}}.bind(this));},registerListenerForUserClick:function k(l,m){if(!m)return;var n=['click','touchstart','mousedown'],o=function(){this.appendUserActionIfNew(l+':click');}.bind(this);if(m.addEventListener){n.forEach(function(p){m&&m.addEventListener(p,o);});}else if(m.attachEvent)m.attachEvent('onclick',o);},registerListenerForUserClickAndVisibility:function k(l,m){if(m){this.registerListenerForVisibility(l,m);this.registerListenerForUserClick(l,m);}},appendUserActionIfNew:function k(l,m){if(!m){h.appendActionIfNew(i,l);}else h.appendActionWithTagIfNew(i,l,m);},isElementVisible:function k(l){if(!l)return false;var m=l.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,p=l.contains(document.elementFromPoint((m.left+m.right)/2,(m.top+m.bottom)/2));if(!p)return false;return m.top>=0&&m.bottom<=n&&m.left>=0&&m.right<=o;}};f.exports=j;}),null);
__d('SharerQuotation',['DOM','CSS'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=null,k=null,l={addCloseListener:function m(n){n.addEventListener('click',function(){i.hide(k);if(j)j.value='';});},init:function m(n,o){if(n.value){j=n;k=o;}if(!window.opener)return;var p=false,q=null;try{p=window.opener.location.pathname.indexOf('/plugins/quote')!==-1;q=window.opener.document.getElementById('quotationtext');}catch(r){}if(p&&q&&q.value){n.value=q.value;var s=o.getElementsByClassName('share-quote-text-text');h.setContent(s[0],n.value);i.show(o);j=n;k=o;}}};f.exports=l;}),null);